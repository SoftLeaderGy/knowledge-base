import{_ as s,c as i,o as a,a4 as n}from"./chunks/framework.IpiIUH1b.js";const l="/assets/1711502212429-e7793bd1-70b6-45ca-83d1-91c75a3f74f7.C-1XoP4j.png",y=JSON.parse('{"title":"一、docker基于aipine基础镜像","description":"","frontmatter":{},"headers":[],"relativePath":"sidebar/Docker/docker基于aipine基础镜像与部署jar包/docker基于aipine基础镜像与部署jar包.md","filePath":"sidebar/Docker/docker基于aipine基础镜像与部署jar包/docker基于aipine基础镜像与部署jar包.md","lastUpdated":null}'),e={name:"sidebar/Docker/docker基于aipine基础镜像与部署jar包/docker基于aipine基础镜像与部署jar包.md"},p=n(`<h1 id="一、docker基于aipine基础镜像" tabindex="-1">一、docker基于aipine基础镜像 <a class="header-anchor" href="#一、docker基于aipine基础镜像" aria-label="Permalink to &quot;一、docker基于aipine基础镜像&quot;">​</a></h1><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#使用Alpine Linux作为基础镜像</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> alpine</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/apk/repositories</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> net-tools</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lsof</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装OpenJDK 11</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-cache</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openjdk8</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 验证Java是否安装成功</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CMD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;java&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-version&quot;]</span></span></code></pre></div><ul><li>构建镜像<code>docker build -t alpine-java8:1.0 .</code></li><li>运行：<code>docker run --name alpine-java8 -itd alpine-java8:1.0 /bin/sh</code></li></ul><h1 id="二、基于aipine基础镜像部署jar包实例" tabindex="-1">二、基于aipine基础镜像部署jar包实例 <a class="header-anchor" href="#二、基于aipine基础镜像部署jar包实例" aria-label="Permalink to &quot;二、基于aipine基础镜像部署jar包实例&quot;">​</a></h1><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FROM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> alpine</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MAINTAINER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SoftLeaderGy</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/apk/repositories</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> net-tools</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lsof</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装OpenJDK 8</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RUN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-cache</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openjdk8</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># VOLUME 指定临时文件目录为/tmp，在主机/var/lib/docker目录下创建了一个临时文件并链接到容器的/tmp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">VOLUME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ADD</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker_boot-0.0.1-SNAPSHOT.jar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker_boot.jar</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ENTRYPOINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;java&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;docker_boot.jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;--server.port=6001&quot;]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EXPOSE</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 6001</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 验证Java是否安装成功</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CMD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;java&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-version&quot;]</span></span></code></pre></div><ul><li>构建镜像：<code>docker build -t alpine-java8:1.0 .</code>（需要将Dockerfile 与 jar包放在同一级目录下）</li><li>启动命令<code>docker run --name alpine-java8-boot -itd -p 6001:6001 alpine-java8:1.0 /bin/sh</code></li></ul><h1 id="三、遇到相关问题" tabindex="-1">三、遇到相关问题 <a class="header-anchor" href="#三、遇到相关问题" aria-label="Permalink to &quot;三、遇到相关问题&quot;">​</a></h1><h2 id="_1、dockerfile-apk-add-下载更新软件时-比较慢-如何解决" tabindex="-1">1、Dockerfile apk add 下载更新软件时，比较慢，如何解决 <a class="header-anchor" href="#_1、dockerfile-apk-add-下载更新软件时-比较慢-如何解决" aria-label="Permalink to &quot;1、Dockerfile apk add 下载更新软件时，比较慢，如何解决&quot;">​</a></h2><ul><li>更新下仓库源</li><li><img src="`+l+'" alt="image.png"></li><li>阿里镜像<code>RUN sed -i &#39;s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g&#39; /etc/apk/repositories</code></li><li>科大镜像<code>RUN sed -i &#39;s/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g&#39; /etc/apk/repositories</code></li><li>其他镜像仓库问题参考：<a href="https://blog.csdn.net/u011582922/article/details/130153250" target="_blank" rel="noreferrer">https://blog.csdn.net/u011582922/article/details/130153250</a></li><li>注意：alpine系统需要以<code>/bin/sh</code>结尾进行启动</li></ul><h1 id="docker-compose中设置redis容器密码" tabindex="-1">docker-compose中设置Redis容器密码 <a class="header-anchor" href="#docker-compose中设置redis容器密码" aria-label="Permalink to &quot;docker-compose中设置Redis容器密码&quot;">​</a></h1><p><a href="https://blog.csdn.net/weixin_44799217/article/details/131079990" target="_blank" rel="noreferrer">https://blog.csdn.net/weixin_44799217/article/details/131079990</a></p>',11),k=[p];function t(h,r,d,F,o,c){return a(),i("div",null,k)}const E=s(e,[["render",t]]);export{y as __pageData,E as default};
