import{_ as e,c as l,o as i,a4 as o}from"./chunks/framework.CujM31lN.js";const s="/assets/1659927874780-77028ce6-1ffc-4e8e-a9bd-792002862602.CDMlHOMY.png",a="/assets/1659927874768-7e3238e2-0c14-44d4-a956-6fdc352a5898.7NkLM6nQ.png",t="/assets/1659927878363-8a95a06e-ce97-42fb-9783-fb43c5dec39a.BNIORTnm.png",r="/assets/1659927876112-85fa3aed-99a8-4a30-b893-bf986fc824b1.DrmGMyuH.png",p="/assets/1659927875156-e672b575-4b67-45a0-9f6e-d2faed6c8b4d.D-zOjlAB.png",c="/assets/1659927875844-40b58d6b-2378-4f2e-8102-f72e5635e0e6.b1foVhiS.png",n="/assets/1659927877017-450890bb-e94c-4034-bc05-79853f9ee048.BDxkoyWh.png",g="/assets/1659927877243-9676604d-3083-4fbf-9b1b-a43983199869.DbuiK4G0.png",m="/assets/1659927877704-cc63a5b9-93f7-4a3f-afc6-66530b834a08.DVheynpK.png",_="/assets/1659927878113-d8176e25-016f-4f94-82c0-8224ab7ef0f4.CWdAGFhJ.png",f="/assets/1659927878785-bba22e6a-54f1-481b-a081-208b202a43e9.B3N46bof.png",u="/assets/1659927880192-4b28e8ac-149e-4083-8ef3-e7ea9e85b3b6.C8H20r21.png",b="/assets/1659927880155-331a9823-d79c-47a9-a2df-6da55a14dd73.D-FChApD.png",d="/assets/1659927880233-b3f8fa36-39dc-4819-b1f0-392d719fb758.DW4itMgN.png",z="/assets/1659927881286-4b5ab4e2-9abb-40fa-971a-31aa25bea7b8.CW63ZCdt.png",k="/assets/1659927881626-5f475a8f-7915-42bf-8734-f59318284a88.CzXXUDQX.png",h="/assets/1659927882639-7ea23eff-c12f-4f51-9b86-37677e934756._tG9xcRQ.png",C="/assets/1659927882892-364fe992-a62f-4e28-956c-d2ea1d437a85.C-6mlCZP.png",T="/assets/1659927883052-301f7a76-8a72-439a-937d-a3b046257f13.C2-ps-j6.png",B=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"sidebar/服务治理篇/zookeeper/zookeeper.md","filePath":"sidebar/服务治理篇/zookeeper/zookeeper.md","lastUpdated":1713767287000}'),A={name:"sidebar/服务治理篇/zookeeper/zookeeper.md"},D=o('<p><strong>zookeeper</strong></p><ul><li>zookeeper <ul><li>安装 <ul><li>环境：linux <ul><li>下载 <ul><li>官网下载：<a href="https://zookeeper.apache.org/releases.html" target="_blank" rel="noreferrer">https://zookeeper.apache.org/releases.html</a></li></ul></li><li>上传至服务器</li><li>解压 tar -zxvf zookeeper-3.4.13.tar.gz</li><li>编辑配置文件 <ul><li>1.进入conf目录： [root@localhost local]# cd zookeeper-3.4.13/conf</li><li><ol start="2"><li>将zoo_sample.cfg这个文件复制为zoo.cfg (必须是这个文件名) [root@localhost conf]# cp zoo_sample.cfg zoo.cfg</li></ol></li></ul></li><li>配置环境变量 <ul><li>[root@localhost zookeeper-3.4.13]# export ZOOKEEPER_INSTALL=/usr/local/zookeeper-3.4.13/</li><li>[root@localhost zookeeper-3.4.13]# export PATH=PATH:PATH:PATH:ZOOKEEPER_INSTALL/bin</li></ul></li><li>启动zookeeper <ul><li>1.进入bin目录，并启动zookeeper。 如果不是在bin目录下执行，启动zookeeper时会报错： bash: ./zkServer.sh: No such file or directory</li><li>注意： ./zkServer.sh start前面的 . 不可忽略。 <ul><li>[root@localhost local]# cd /usr/local/zookeeper-3.4.13/bin</li><li>[root@localhost bin]# ./zkServer.sh start</li></ul></li><li>2.启动成功效果如下：<img src="'+s+'" alt="image.png"></li><li>3.zookeeper的服务端启动后，还需要启动zookeeper的客户端： [root@localhost bin]# ./zkCli.sh</li><li>4.查看状态：<img src="'+a+'" alt="image.png"></li></ul></li></ul></li></ul></li><li>创建服务并注册进zookeeper <ul><li>服务样例<img src="'+t+'" alt="image.png"></li><li>appliaction.yml<img src="'+r+'" alt="image.png"></li></ul></li><li>测试 <ul><li>启动zookeeper服务 <ul><li>./zkServer.sh start</li></ul></li><li>在服务器上启用zookeeper客户端 <ul><li>./zkCli.sh<img src="'+p+'" alt="image.png"> 图二为结果</li></ul></li><li>查看根结点 如果没有服务注册进zookeeper时，根结点就只有一个zookeeper节点 <ul><li>ls /<img src="'+c+'" alt="image.png"></li></ul></li><li>查看节点里的其他节点<img src="'+n+'" alt="image.png"></li></ul></li><li>获取在zookeeper中，注册的服务信息 get /.../.... <ul><li>实例<img src="'+g+'" alt="image.png"><ul><li>节点信息转成json对象后 <ul><li>实例<img src="'+m+'" alt="image.png"></li></ul></li></ul></li></ul></li><li>springcloud整合zookeeper <ul><li>服务配置（application.yml） <ul><li>服务提供者 <ul><li>application.yml<img src="'+_+'" alt="image.png"></li><li>主启动类<img src="'+f+'" alt="image.png"></li><li>业务类（controller）<img src="'+u+'" alt="image.png"></li></ul></li><li>服务消费者 <ul><li>application.yml<img src="'+b+'" alt="image.png"></li><li>主启动类<img src="'+d+'" alt="image.png"></li><li>业务类（controller）<img src="'+z+'" alt="image.png"></li></ul></li></ul></li><li>服务注册 <ul><li>当服务配置完以后，启动服务就会根据配置注册到zookeeper中。</li><li>zookeeper里被注册了服务后就会在根结点多一个services<img src="'+k+'" alt="image.png"></li><li>查看services<img src="'+h+'" alt="image.png"></li><li>查看单个服务<img src="'+C+'" alt="image.png"></li><li>根据节点流水号查询节点服务相关信息<img src="'+T+'" alt="image.png"></li><li>根据返回的json串即可读取服务的相关信息</li></ul></li></ul></li></ul></li></ul>',2),S=[D];function P(N,v,x,y,E,O){return i(),l("div",null,S)}const I=e(A,[["render",P]]);export{B as __pageData,I as default};
